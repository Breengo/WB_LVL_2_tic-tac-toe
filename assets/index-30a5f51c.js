(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))t(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&t(c)}).observe(document,{childList:!0,subtree:!0});function i(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function t(o){if(o.ep)return;o.ep=!0;const r=i(o);fetch(o.href,r)}})();let s="blue",f="duo",u="easy",n=[0,0,0,0,0,0,0,0,0];const m=document.querySelector(".win_message"),a=m.querySelectorAll("button"),d=document.querySelector("h2"),y=m.querySelector("p"),b=localStorage.getItem("table"),h=()=>{n=[0,0,0,0,0,0,0,0,0],s="blue",d.style.color="#4f4de0",d.innerText="Ход синего",m.style.display="none",document.querySelectorAll(".table_block").forEach((l,e)=>{l.innerHTML=""})};b&&(h(),n=JSON.parse(b),s=localStorage.getItem("move"),f=localStorage.getItem("mode"),u=localStorage.getItem("complexity"),s==="blue"?(d.style.color="#4f4de0",d.innerText="Ход синего"):(d.style.color="#e04d4d",d.innerText="Ход красного"),document.querySelectorAll(".table_block").forEach((l,e)=>{n[e]===1?l.innerHTML="<div class='o'></div>":n[e]===2&&(l.innerHTML="<div class='x'></div>")}));a.forEach((l,e)=>{l.addEventListener("click",()=>{e===1?(f="solo",y.innerText="Выберите сложность",a[0].style.display="none",a[1].style.display="none",a[2].style.display="block",a[3].style.display="block"):e===2?(u="easy",h()):e===3?(u="hard",h()):(f="duo",h())})});const S=()=>{a[0].style.display="block",a[1].style.display="block",a[2].style.display="none",a[3].style.display="none"},M=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],T=l=>{let e=!1;return M.forEach(i=>{i.filter(t=>n[t]===l).length===3&&(e=!0)}),e},v=()=>{let l=0,e=-1,i=0;return M.forEach(t=>{let o=0,r=0;for(let c=0;c<t.length;c++)n[t[c]]===2?o++:n[t[c]]===1?r++:l=t[c],o===2&&(i=l),r===2&&(e=l)}),i||e},p=(l,e)=>{n[e]=s==="red"?2:1,d.style.color=s==="red"?"#4f4de0":"#e04d4d",d.innerText=`Ход ${s==="red"?"синего":"красного"}`,l.innerHTML=`<div class=${s==="red"?"x":"o"}></div>`,T(s==="red"?2:1)?(localStorage.removeItem("table"),m.style.display="flex",y.innerText=`Победил ${s==="red"?"красный":"синий"}`,y.style.color=s==="red"?"#e04d4d":"#4f4de0",S(),s="blue"):n.filter(i=>i!==0).length===9?(localStorage.removeItem("table"),m.style.display="flex",y.innerText="Ничья",y.style.color="#242424",S(),s="blue"):(s==="red"?s="blue":s="red",localStorage.setItem("table",JSON.stringify(n)),localStorage.setItem("move",s),localStorage.setItem("mode",f),localStorage.setItem("complexity",u))},g=document.querySelectorAll(".table_block");g.forEach((l,e)=>{l.addEventListener("click",()=>{if(l.innerHTML===""){p(l,e);const i=n.filter(t=>t!==0).length;if(f==="solo"&&u==="easy"&&i!==9){let t=Math.round(Math.random()*10)%9;for(;n[t]!==0;)t=Math.round(Math.random()*10)%9;p(g[t],t)}else if(f==="solo"&&u==="hard"){let t=0;if(v()===-1){let r=Math.round(Math.random()*10)%9;for(;n[r]!==0;)r=Math.round(Math.random()*10)%9;t=r}else t=v();p(g[t],t)}}})});
